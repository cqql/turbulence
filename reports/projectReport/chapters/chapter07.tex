%!TEX root = ./../projectReport.tex

\chapter{Usability} % (fold)
\label{cha:usability}
To perform the commands shown in this chapter please navigate to the C++-project folder ('turbulence').


\section{Project folder} % (fold)
\label{sec:project_folder}

NS-EOF can still be run by writing into the shell the following command:

\bashh{SCENARIOS/run.txt}{1}

\noii However, we advice to run the Python-script 'run' both on the cluster and locally to start a simulation\footnote{For more informations on the options we refer to the help:
\bashh{SCENARIOS/runh.txt}{1}
}:

\bashh{SCENARIOS/runl.txt}{1}

\noii By doing so, the simulation is started but also a new folder is created containing all relevant file of a simulation. This folder may be referenced in the following as project folder.

\noii By copying and placing all the input files (configuration file, backup file for initialisation, geometry file) and result files (output, vtk files, backup file, timing results) into one folder the user is enabled to completely understand the simulation at a later time.

\noii The following tree shows the structure of the project folder:
\dirtree{%
.1 project.
.2 job.cmd.
.2 log.
.2 out.
.2 petsc\_commandline\_arg.
.2 scenario.xml.
.2 timing/.
.3 ....
.2 vtks/.
.3 ....
}

\noii The next sections describe two input files (configuration and geometry files) in more detail.

\clearpage

\section{Configuration file} % (fold)
\label{sec:configuration_file}

For completeness reasons a configuration file in its original appearance as provided at the beginning of the lab course is shown. 

\noii It contains the setup for a DNS simulation of a backwards facing step scenario with a streched mesh.

\xmll{SCENARIOS/conf-reference.xml}{2}

\noii All additional new options are shown in the following sections in reference to this file.

\newpage
\subsubsection*{Algebraic Turbulence Model}

For the second worksheet the group implemented an algebraic turbulence model with different methods to limit the mixing length and thus the eddy viscosity (nulimiter=1: no limitation; =3 limitation with the help of a laminar flat plate Blasius boundary layer; =4 limitation with the help of a turbulent flat boundary layer). 

\xmll{SCENARIOS/type-aturb.xml}{2}

\noii A laminar simulation with this implementation can be performed by setting $\nu_t$ to zero (type='laminar'). The results should be comparable with the DNS-simulation (see [LMS-15, S.XY]).  

\subsubsection*{k-$\varepsilon$-Turbulence Model}

The user can use alternatively to the algebraic turbulence model the k-$\varepsilon$ model to calculate the eddy viscosity. Following optional parameters can be set:
\begin{itemize}
\item model constants $C_{\varepsilon 1}$, $C_{\varepsilon 2}$, $\sigma_k$, $\sigma_\varepsilon$ and $C_{\mu}$ (see equation XY)
\item wall near treatment (model=0: no wall modifications, =1: Lam and Bremhorst, =2: Chien, =3: Jones and Launder, =4 Fan and Lakshminarayana)
\item adaptive time stepping (number of refinements and permitted error - see section XY)
\item solving quasi laminar for the first 'start' seconds (not solving the transport equations for $k$ and $\varepsilon$ and setting $\nu_T=0$)
\end{itemize}

\xmll{SCENARIOS/type-ke.xml}{2}

\noii A laminar simulation with this implementation can be performed by setting $\nu_t$ to zero (type='laminar'). The results should be comparable with the DNS-simulation (see [LMS-15, S.XY]).  

\subsubsection*{Scenarios}

As described in section~XY 3 additional scenarios were added:

\begin{itemize}
\item symmetrical channel
\xmll{SCENARIOS/scenario-channel-symm.xml}{1}
\item boundary layer over a flat plate
\xmll{SCENARIOS/scenario-boundary.xml}{1}
\item free shear flow (without any side walls)
\xmll{SCENARIOS/scenario-free.xml}{1}
\end{itemize}

\subsubsection*{Inlet}

For every scenario except for 'cavity' the velocity inlet profile in x-direction can be prescribed as either uniform (true) or parabolic (false).

\xmll{SCENARIOS/scenario-uniform.xml}{1}

\subsubsection*{Flow around Arbitrary Geometry}

The user can specify a reference to a geometry file (see XY) to be used as obstacle in any scenario.

\xmll{SCENARIOS/ageom.xml}{2}

\subsubsection*{Backup Files}

The user can specify the backup files to be used for initialisation and respectively for saving the results of the final time step.

\xmll{SCENARIOS/restart.xml}{2}

% subsection configuration_file (end)

\clearpage

\section{Geometry file} % (fold)
\label{sec:geometry_file}

The geometry file (.geo) contains the coordinated of all obstacle cells. Each line represents exactly one obstacle cell and has the following format (with the first number i, the second number j and the third number k):

\xmll{SCENARIOS/geo.txt}{2}

\noii The team created two Matlab-scripts for creating files of the necessary format for 2D geometries:
\begin{itemize}
\item \underline{Scripting}:\\
The user specifies with a basic function which position is in the geometry and which is in the flow field. The Matlab-script evaluates this function for the middle point of each cell and writes the file. Elementary geometries (circle, square, plate) and geometries composed by these can be created:

\begin{figure}[!htb]
\centering
\includegraphics[scale=.3]{FIGURES/circle.eps}
\caption{Circle in a channel}
\label{fig:circle_in_channel}
\end{figure} 

\item \underline{Drag \& Drop}:\\
The user draws on a cartesian coordinate system the border of the geometry. The program decides recursively which cell is a obstacle cell which is a fluid cell.
\end{itemize}



% subsection geometry_file (end)

% chapter usability (end)